/*! For license information please see complex.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["complex"],{"./src/images/chevron.png":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/chevron.png"},"./src/images/chevron.webp":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/chevron.webp"},"./src/images/i.png":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/i.png"},"./src/images/i.webp":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/i.webp"},"./src/images/link.png":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/link.png"},"./src/images/link.webp":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/link.webp"},"./src/images/lockAspectRatio.png":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/lockAspectRatio.png"},"./src/images/lockAspectRatio.webp":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/lockAspectRatio.webp"},"./src/images/magnifier.png":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/magnifier.png"},"./src/images/magnifier.webp":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/magnifier.webp"},"./src/images/mathcalO.png":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/mathcalO.png"},"./src/images/mathcalO.webp":(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=n.p+"./images/mathcalO.webp"},"./src/complex.scss":(e,t,n)=>{n.r(t)},"./src/complex.tsx":function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n("./node_modules/react/index.js")),c=n("./node_modules/@hot-loader/react-dom/index.js");n("./src/complex.scss");const l=o(n("./src/components/ComplexPlotter.tsx"));(0,c.render)(s.createElement(l.default,null),document.querySelector("#root"))},"./src/components/ComplexPlotter.tsx":function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n("./node_modules/react/index.js")),c=n("./src/scripts/complex/complexNumbers.ts"),l=n("./src/scripts/complex/parse.ts"),u=o(n("./src/images/mathcalO.webp")),h=o(n("./src/images/mathcalO.png")),d=o(n("./src/images/chevron.webp")),p=o(n("./src/images/chevron.png")),f=o(n("./src/images/i.webp")),m=o(n("./src/images/i.png")),g=o(n("./src/images/link.webp")),w=o(n("./src/images/link.png")),v=o(n("./src/images/lockAspectRatio.webp")),b=o(n("./src/images/lockAspectRatio.png")),x=o(n("./src/images/magnifier.webp")),y=o(n("./src/images/magnifier.png"));t.default=()=>s.createElement(s.Fragment,null,s.createElement("canvas",{id:"myCanvas",width:1440,height:900,tabIndex:0}),s.createElement("div",{id:"allInputDiv"},s.createElement("div",{className:"input",id:"inputDiv"},s.createElement("textarea",{id:"mainInput",contentEditable:!0,suppressContentEditableWarning:!0,autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),s.createElement("label",{htmlFor:"mainInput"},s.createElement("span",{className:"hoverText"},"function"))),s.createElement("div",{className:"input",id:"widthDiv"},s.createElement("textarea",{id:"widthInput",contentEditable:!0,suppressContentEditableWarning:!0,autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),s.createElement("label",{htmlFor:"widthInput"},s.createElement("span",{className:"hoverText"},"width"))),s.createElement("div",{className:"input",id:"heightDiv",hidden:!0},s.createElement("textarea",{id:"heightInput",contentEditable:!0,suppressContentEditableWarning:!0,autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),s.createElement("label",{htmlFor:"heightInput"},s.createElement("span",{className:"hoverText"},"height"))),s.createElement("div",{className:"input",id:"centerDiv"},s.createElement("textarea",{id:"centerInput",contentEditable:!0,suppressContentEditableWarning:!0,autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),s.createElement("label",{htmlFor:"centerInput"},s.createElement("span",{className:"hoverText"},"center"))),s.createElement("div",{id:"plusMinusDiv"},s.createElement("div",{className:"input",id:"minusDiv",tabIndex:0},s.createElement("div",{className:"horiz"})),s.createElement("div",{className:"input",id:"plusDiv",tabIndex:0},s.createElement("div",{className:"horiz"}),s.createElement("div",{className:"vert"})),s.createElement("div",{className:"input",id:"chevronDiv",tabIndex:0},s.createElement("picture",{style:{verticalAlign:"middle"}},s.createElement("source",{type:"image/webp",srcSet:d.default}),s.createElement("img",{src:p.default,height:"100%",width:"100%",alt:""}))),s.createElement("br",null),s.createElement("div",{id:"menuBox",hidden:!0},s.createElement("div",{className:"input",id:"originDiv",tabIndex:0},s.createElement("picture",{style:{verticalAlign:"middle"}},s.createElement("source",{type:"image/webp",srcSet:u.default}),s.createElement("img",{src:h.default,height:"100%",width:"100%",alt:""}))),s.createElement("div",{className:"input",id:"ARButton",tabIndex:0},s.createElement("picture",{style:{verticalAlign:"middle"}},s.createElement("source",{type:"image/webp",srcSet:v.default}),s.createElement("img",{src:b.default,height:"100%",width:"100%",alt:""}))),s.createElement("div",{className:"input",id:"rslnButt",tabIndex:0},s.createElement("picture",{style:{verticalAlign:"middle"}},s.createElement("source",{type:"image/webp",srcSet:x.default}),s.createElement("img",{src:y.default,height:"100%",width:"100%",alt:""}))),s.createElement("br",null),s.createElement("div",{className:"input",id:"copyButt",tabIndex:0},s.createElement("picture",{style:{verticalAlign:"middle"}},s.createElement("source",{type:"image/webp",srcSet:g.default}),s.createElement("img",{src:w.default,height:"100%",width:"100%",alt:""}))),s.createElement("div",{className:"input",id:"infoButt",tabIndex:0},s.createElement("picture",{style:{verticalAlign:"middle"}},s.createElement("source",{type:"image/webp",srcSet:f.default}),s.createElement("img",{src:m.default,height:"100%",width:"100%",alt:""}))),s.createElement("br",null)))),s.createElement("div",{id:"errorDiv"}));const M=20;function E(e){return document.getElementById(e)}const k=Math.floor;var T,I,N,C,D,F,S,O,_,A=["mainInput","widthInput","heightInput","centerInput"];window.onresize=()=>{P.hasChanged=!0},window.addEventListener("load",(function(){I=E("mainInput"),N=E("widthInput"),C=E("heightInput"),D=E("centerInput"),A=["mainInput","widthInput","heightInput","centerInput"],F=E("myCanvas"),S=F.getContext("2d"),O=new ImageData(F.width,F.height),_=O.data,E("allInputDiv").addEventListener("keydown",X),E("plusMinusDiv").addEventListener("click",Y),F.addEventListener("keydown",H);for(let e of["inputDiv","widthDiv","heightDiv"])E(e).addEventListener("click",U);F.height=window.innerHeight,F.width=window.innerWidth;let e=window.location.hash;""!==e&&"#"!==e?setTimeout(ee,0,e.replace(/%20/g," ")):B(0,0),P.hasChanged=!0,F.onmousedown=function(e){2!==e.buttons&&(F.onmousemove=j,F.addEventListener("keydown",L),R=[e.pageX,e.pageY])},F.onmouseup=function(e){if(F.onmousemove=null,F.removeEventListener("keydown",L),void 0===R)return;if(Math.abs(e.pageX-R[0])<5&&Math.abs(e.pageY-R[1])<5)return S.putImageData(O,0,0),void 0===T&&Q(P.lastFunc),void(R=void 0);let t=O.width/window.innerWidth,n=(e.pageX-R[0])/F.width*P.width*t,i=-(e.pageY-R[1])/F.height*P.height*t;P.center=[P.center[0]-n,P.center[1]-i],B(P.center[0],P.center[1]),O=S.getImageData(0,0,F.width,F.height),_=O.data,Q(P.lastFunc),R=void 0}}),!1);const P={center:[0,0],width:10,height:window.innerHeight/window.innerWidth*10,setHeight:function(e){this.height=window.innerHeight/window.innerWidth*e},setWidth:function(e){this.width=window.innerWidth/window.innerHeight*e},manuallySet:!1,hasChanged:!1,lastFunc:null,lastFuncStr:null,fixAspectRatio:!0};function B(e,t){P.center=[e,t],D.value=e+"+"+t+"i",D.lastValue=D.value}function q(){P.fixAspectRatio?(E("heightDiv").hidden=!1,P.fixAspectRatio=!1):(E("heightDiv").hidden=!0,P.fixAspectRatio=!0)}var R;function j(e){if(void 0===R)return;const t=O.width/window.innerWidth,[n,i]=[(e.pageX-R[0])*t,(e.pageY-R[1])*t];void 0!==T&&(clearTimeout(T),T=void 0),S.fillRect(0,0,F.width,F.height),S.putImageData(O,n,i)}function L(e){"Escape"===e.code&&(F.onmousemove=null,R=void 0,F.removeEventListener("keydown",L),S.putImageData(O,0,0),void 0===T&&Q(P.lastFunc))}function z(){const[e,t]=[F.width,F.height];O=S.getImageData(Math.ceil(e/4),Math.ceil(t/4),k(3*e/4),k(3*t/4)),_=O.data;const n=new Uint8ClampedArray(e*t*4);let i=0;for(let r=0;r<t;r++){let t=k(r/2)*O.width*4;for(let r=0;r<e;r++)n[i]=_[t],n[i+1]=_[t+1],n[i+2]=_[t+2],n[i+3]=_[t+3],i+=4,r%2==1&&(t+=4)}O=new ImageData(n,e),_=O.data,S.putImageData(O,0,0),P.width/=2,P.height/=2,Q(P.lastFunc)}function W(){const[e,t]=[F.width,F.height];O=S.getImageData(0,0,e,t),_=O.data;const n=new Uint8ClampedArray(k(e/2)*k(t/2)*4);let i=0,r=0;for(let a=0;a<k(t/2);a++){i=2*e*a*4;for(let t=0;t<k(e/2);t++)n[r]=_[i],n[r+1]=_[i+1],n[r+2]=_[i+2],n[r+3]=_[i+3],r+=4,i+=8}S.fillRect(0,0,e,t),S.putImageData(new ImageData(n,k(e/2)),k(e/4),k(t/4)),O=S.getImageData(0,0,e,t),_=O.data,P.width*=2,P.height*=2,Q(P.lastFunc)}function H(e){if(!e.isComposing)switch(e.code){case"Tab":e.preventDefault(),I.focus();break;case"Equal":V(e)||z();break;case"Minus":V(e)||W()}}function V(e){return e.ctrlKey||e.metaKey||e.altKey}function U(e){e.target.children.length>0&&e.target.children[0].focus()}function X(e){if(e.isComposing)return;let t=e.target.id;A.indexOf(t)>=0?"Enter"===e.code&&(e.preventDefault(),function(){let e,t=I.value,n=N.value,i=C.value,r=D.value;if(r!==D.lastValue)try{P.center=(0,l.strToNum)(r),D.lastValue=r,P.hasChanged=!0}catch(e){J(e,!0)}if(n!==N.lastValue&&(G("width",N.value),P.manuallySet=!0),i!==C.lastValue&&(G("height",C.value),P.manuallySet=!0),"string"==typeof t&&""!=t){try{e=(0,l.strToFunc)(t)}catch(e){return void J(e)}Q(e,P.lastFuncStr!==t),P.lastFuncStr=t}}()):"Enter"!==e.code&&"Space"!==e.code||("horiz"!==t&&"vert"!==t||(t=e.target.parentNode.id),K(t))}function Y(e){let t=e.target;for(["horiz","vert"].indexOf(e.target.classList[0])>=0&&(t=e.target.parentNode);!["plusDiv","minusDiv","originDiv","chevronDiv","copyButt","infoButt","ARButton","rslnButt"].includes(t.id);){if(null===t.parentNode)return;t=t.parentNode}K(t.id)}function K(e){switch(e){case"plusDiv":z();break;case"minusDiv":W();break;case"originDiv":P.center!=[0,0]&&(P.center=[0,0],P.width=10,P.setHeight(P.width),B(0,0),P.hasChanged=!0,P.manuallySet=!1,Q(P.lastFunc));break;case"chevronDiv":!function(){let e=E("menuBox"),t=E("chevronDiv");t.classList.contains("upsidedown")?(t.classList.remove("upsidedown"),e.hidden=!0):(t.classList.add("upsidedown"),e.hidden=!1)}();break;case"copyButt":!function(){if(null===P.lastFuncStr)return void J("Link could not be copied: no function.");let e="https://pillig3.github.io/complex.html#";e+=P.lastFuncStr.replace(/ /g,"%20")+"&",e+=P.center[0]+","+P.center[1]+"&",e+=P.width,P.fixAspectRatio||(e+=","+P.height),navigator.clipboard.writeText(e)}();break;case"infoButt":window.open("/complex-info.html");break;case"ARButton":q();break;case"rslnButt":!function(){const e=prompt("Change resolution:\nEnter a width for the image in pixels",F.width.toString());if(null===e||""===e)return;let t=parseInt(e);isNaN(t)&&(t=F.width),t=Math.max(t,M);let n=P.height/P.width*t;F.width=t,F.height=n,P.hasChanged=!0,Q(P.lastFunc,!1)}()}}function G(e,t){if(""===t)return!1;let n=parseFloat(t);if("number"!=typeof n||n<=0||isNaN(n)||n===1/0)J(e[0].toUpperCase()+e.slice(1)+" should be a positive number");else if(n!==P[e])return P[e]=n,P.hasChanged=!0,!0;return!1}function J(e,t=!1){let n="",i=E("errorDiv");t?(i.innerHTML="❗&nbsp;"+e+"&nbsp;❗",n="notAnError"):(i.innerHTML="❗&nbsp;&nbsp;&nbsp;&nbsp;"+e+"&nbsp;&nbsp;&nbsp;&nbsp;❗",n="anError"),i.classList.add("visible"),i.classList.add(n),setTimeout((e=>{e.classList.remove("visible"),e.classList.remove(n)}),4e3,i)}function Q(e,t=!1,n){if(null===e)return;P.lastFunc=e;let i=F.width,r=F.height;P.hasChanged&&(!P.fixAspectRatio&&P.manuallySet||P.setHeight(P.width),O=new ImageData(i,r),_=O.data,t=!0,P.hasChanged=!1),N.value=P.width.toString(),C.value=P.height.toString(),N.lastValue=N.value,C.lastValue=C.value,void 0!==T&&clearTimeout(T);let a=function(e,t){const n=P.width,i=P.height;return function(r,a){return[P.center[0]-n/2+r/e*n,P.center[1]+i/2-a/t*i]}}(i,r),o=function(e,t,n,i){let r=[];for(let a=0;a<n;a+=k(n/6))for(let n=0;n<i;n+=k(i/6)){const i=(0,c.Mod)(e(t(a,n)))[0];isNaN(i)||i===1/0||void 0===i||r.push(i)}if(0===r.length)return e=>0;let a=((u=r).sort(((e,t)=>t-e)),u.length%2==0?(u[k(u.length/2)]+u[k(u.length/2)+1])/2:u[k(u.length/2)]),o=Math.max(...r),s=0,l=Math.sqrt(r.map((e=>Math.pow(e-a,2))).reduce(((e,t)=>t===1/0?e:(s++,e+t)),0));var u;return 0!==s&&(l/=s),function(e){return isNaN(e)||e===1/0?1:e>=a?1/(1+Math.pow(Math.E,-(e-a)/Math.pow(2,o))):Math.sqrt(Math.pow(a,2)-Math.pow(Math.pow(Math.max(e,0)*a,.5)-a,2))/(2*a)}}(e,a,i,r);t&&function(e,t,n,i,r){let a;for(let o=0;o<Math.ceil(r/M);o++)for(let r=0;r<Math.ceil(i/M);r++){let s=r*M,l=o*M,u=e(t(s+10,l+10)),[h,d,p]=$((0,c.Arg)(u)[0],n((0,c.Mod)(u)[0])),f=a=4*i*l+4*s;for(l=0;l<M;l++)for(a=f+4*i*l,s=0;s<M;s++)_[a]=h,_[a+1]=d,_[a+2]=p,_[a+3]=255,a+=4}S.putImageData(O,0,0)}(e,a,o,i,r),T=setTimeout((()=>{Z(e,0,a,o,i,r,n)}))}function Z(e,t,n,i,r,a,o){if(t>=r)void 0!==o&&o();else{for(let o=0;o<5&&t<r;o++){for(let o=0;o<a;o++){const a=4*r*o+4*t,s=e(n(t,o)),[l,u,h]=$((0,c.Arg)(s)[0],i((0,c.Mod)(s)[0]));_[a]=l,_[a+1]=u,_[a+2]=h,_[a+3]=255}t++}S.putImageData(O,0,0),T=setTimeout((()=>{Z(e,t,n,i,r,a,o)}))}}function $(e,t){isNaN(e)&&(e=0);let n,i,r,a=(e=function(e,t){return e<0?Math.abs(t)+e%t:e%t}(e,2*Math.PI))/(Math.PI/3),o=1-Math.abs(2*t-1),s=o*(1-Math.abs(a%2-1));[n,i,r]=0===o?[0,0,0]:a<=1?[o,s,0]:a<=2?[s,o,0]:a<=3?[0,o,s]:a<=4?[0,s,o]:a<=5?[s,0,o]:[o,0,s];let c=t-o/2;return[n,i,r].map((e=>k(255*(e+c))))}function ee(e){let t,[n,i,r]=e.slice(1).split("&");if(void 0!==i&&""!==i){const e=i.split(",").map((e=>parseFloat(e)));2===e.length&&(P.center=e)}if(B(P.center[0],P.center[1]),void 0!==r&&""!==r){let[e,t]=r.split(",").map((e=>parseFloat(e)));P.width=e,void 0!==t?(P.height=t,P.manuallySet=!0,q()):P.setHeight(e),P.hasChanged=!0}I.value=n,P.lastFuncStr=n;try{t=(0,l.strToFunc)(n)}catch(e){return void J(e)}Q(t,!0)}},"./src/scripts/complex/complexNumbers.ts":(e,t)=>{function n(e){return[e,0]}function i(e,t){return[e[0]+t[0],e[1]+t[1]]}function r(e,t){return[e[0]-t[0],e[1]-t[1]]}function a([e,t],[n,i]){return[e*n-t*i,e*i+t*n]}function o(e,t){let n=p(e[0],e[1]),i=p(t[0],t[1]);return f(n[0]*(1/i[0]),n[1]-i[1])}function s([e,t]){return e===1/0||t===1/0?[1/0,1/0]:[Math.pow(Math.E,e)*Math.cos(t),Math.pow(Math.E,e)*Math.sin(t)]}function c(e,t){if(0===e[0]&&0===e[1])return e;let n=p(e[0],e[1]),i=p(Math.log(n[0]),n[1]),r=p(t[0],t[1]);return s(f(r[0]*i[0],r[1]+i[1]))}function l(e){return o(r(s(a([0,1],e)),s(a([0,-1],e))),[0,2])}function u(e){return o(i(s(a([0,1],e)),s(a([0,-1],e))),[2,0])}function h(e){return a([0,-1],l(a([0,1],e)))}function d(e){return u(a([0,1],e))}function p(e,t){let n;return n=Math.abs(e)===1/0||Math.abs(t)===1/0||0===e&&0===t?0:e>=0?Math.atan(t/e):t>=0?Math.PI-Math.atan(t/-e):-Math.PI-Math.atan(t/-e),[Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),n]}function f(e,t){return e===1/0?[1/0,1/0]:[e*Math.cos(t),e*Math.sin(t)]}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeTheta=t.iterate=t.tetrate=t.tanh=t.cosh=t.sinh=t.tangent=t.cosine=t.sine=t.sqrt=t.raise=t.log=t.exp=t.divide=t.mult=t.subtract=t.add=t.Arg=t.Mod=t.Im=t.Re=t.imag=t.real=void 0,t.real=n,t.imag=function(e){return[0,e]},t.Re=function(e){return[e[0],0]},t.Im=function(e){return[e[1],0]},t.Mod=function(e){return[Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),0]},t.Arg=function(e){return[p(e[0],e[1])[1],0]},t.add=i,t.subtract=r,t.mult=a,t.divide=o,t.exp=s,t.log=function(e){let t=p(e[0],e[1]);return[Math.log(t[0]),t[1]]},t.raise=c,t.sqrt=function(e){return c(e,n(.5))},t.sine=l,t.cosine=u,t.tangent=function(e){return o(l(e),u(e))},t.sinh=h,t.cosh=d,t.tanh=function(e){return o(h(e),d(e))},t.tetrate=function([e,t],n){if("number"!=typeof n){if(0===n.length)return[0,1];n=n[0]}if((n=Math.floor(n))<0)return[NaN,NaN];if(0===n)return[1,0];if(1===n)return[e,t];let i=Math.log(Math.sqrt(Math.pow(e,2)+Math.pow(t,2))),r=p(e,t)[1],a=e,o=t;for(let e=1;e<n;e++){const e=a*i-o*r,t=a*r+o*i;a=Math.pow(Math.E,e)*Math.cos(t),o=Math.pow(Math.E,e)*Math.sin(t)}return isNaN(a)||a===1/0||a===-1/0||isNaN(o)||o===1/0||o===-1/0?[1/0,1/0]:[a,o]},t.normalizeTheta=function(e){return e===1/0||e===-1/0?0:e>Math.PI?e-2*Math.floor((e+Math.PI)/(2*Math.PI))*Math.PI:e<=-Math.PI?e+2*Math.floor((-e+Math.PI)/(2*Math.PI))*Math.PI:e},t.iterate=function(e,t){return t<=0?e=>0:1===t?e:(n,...i)=>{let r=n;for(let n=0;n<t;n++)r=e(r,...i);return r}}},"./src/scripts/complex/parse.ts":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCloseParen=t.splitArguments=t.strToNum=t.strToFunc=t.functify=t.parse=t.Node=void 0;const i=n("./src/scripts/complex/complexNumbers.ts"),r=n("./src/scripts/complex/tokenize.ts");function a(e){if(void 0===e.children||0===e.children.length)return e.f;const t=[];for(let n=0;n<e.children.length;n++)t.push(o(e.children[n]));return function(...n){return e.f(...t.map((e=>e(...n))))}}function o(e){if(e instanceof c)return a(e);if(e instanceof Array)return()=>e;if("object"==typeof e){const n=e.position;if(1===n)return e=>e;{let e="n1,";for(var t=2;t<n;t++)e+="n"+t+",";return e+="n"+n,new Function(e,"return n"+n+";")}}return"number"==typeof e?(console.log("This shouldn't happen - child in childToFunc is type number"),()=>(0,i.real)(e)):e}t.strToFunc=function(e){return a(l((0,r.tokenize)(e)))},t.strToNum=function(e){const t=[];try{return a(l((0,r.tokenize)(e),t))()}catch(e){throw"Input must be a complex number"}},t.functify=a;const s={exp:i.exp,ln:i.log,log:i.log,cos:i.cosine,sin:i.sine,tan:i.tangent,sinh:i.sinh,cosh:i.cosh,tanh:i.tanh,tet:i.tetrate,sqrt:i.sqrt,Re:i.Re,Im:i.Im,Arg:i.Arg,Mod:i.Mod,iterate:i.iterate};class c{constructor(e,t){this.f=e,this.children=t}}function l(e,t){void 0===t&&(t=[null]);let n=u(e,t);return n instanceof Array?new c((e=>e),[n]):n instanceof c?n:new c((e=>e),[n])}function u(e,t){if(0===e.length)throw"Syntax error (I don't know what to do with this input)";const n=[],o=e[0];let{funcName:s,index:w}=function(e){let t="",n=-1;for(var i=0;i<e.length;i++){let a=e[i];if(a.type===r.TokenType.Function)(""===t||["+","-"].indexOf(a.text)>=0||["*","/"].indexOf(a.text)>=0&&!(["+","-"].indexOf(t)>=0))&&(t=a.text,n=i);else{if(i>0){let o=e[i-1];o.type!==r.TokenType.Function&&(["+","-"].indexOf(t)>=0||!([r.TokenType.Number,r.TokenType.String].indexOf(o.type)>=0||")"===o.text)||!([r.TokenType.Number,r.TokenType.String].indexOf(a.type)>=0||"("===a.text)||h(o.text)||(t="implicit_mult",n=i))}if([r.TokenType.Parenthesis,r.TokenType.SquareBracket].indexOf(a.type)>=0){if(!(["(","["].indexOf(a.text)>=0))throw console.log(e),"Error: unbalanced parentheses";i=f(e,i,a.type)}}}return{funcName:t,index:n}}(e);if(""!==s)return"-"===s&&0===w?n.push((0,i.real)(0)):n.push(u(e.slice(0,w),t)),"implicit_mult"===s&&(w-=1),n.push(u(e.slice(w+1),t)),new c(function(e){switch(e){case"+":return i.add;case"-":return i.subtract;case"*":return i.mult;case"/":return i.divide;case"^":return i.raise;case"implicit_mult":return i.mult;default:throw"getFuncFromArithFuncString called incorrectly. This should not have been possible!"}}(s),n);if(1===e.length){const e=g(o,t);if("function"==typeof e)throw o.text+" called without arguments";return e}if("("===o.text||"["===o.text){const r=f(e,0,o.type);return r===e.length-1?u(e.slice(1,e.length-1),t):(n.push(u(e.slice(1,r),t)),n.push(u(e.slice(r+1),t)),new c(i.mult,n))}if(h(o.text)){const s=d(o.text);if("("===e[1].text){if(p(o.text))throw o.text+" should be called with square brackets";const a=f(e,1,r.TokenType.Parenthesis),l=m(e.slice(2,a));if(l.length!==s.length)throw"Wrong number of parameters passed to "+o.text;return a===e.length-1?new c(s,l.map((e=>u(e,t)))):(n.push(new c(s,l.map((e=>u(e,t))))),n.push(u(e.slice(a+1),t)),new c(i.mult,n))}if("["===e[1].text){if(!p(o.text))throw o.text+" should not be called with square brackets";const s=f(e,1,r.TokenType.SquareBracket),{complexFunc:h,numArgs:d}=function(e,t){const n=m(t);if("iterate"===e){if(3!==n.length)throw"wrong number of square-bracket parameters for iterate";if(1!==n[2].length||n[2][0].type!==r.TokenType.String)throw"third parameter for iterate should be a single variable";const e=n[2][0].text,t=function(e,t){const n=[];for(let e=0;e<200;e++)n.push(null);return n}();t[0]=e;const o=a(l(n[0],t)),s=a(l(n[1],[]))()[0];if(s<=0)throw"second parameter for iterate should be > 0";return{complexFunc:(0,i.iterate)(o,Math.floor(s)),numArgs:t.indexOf(null)}}throw"getComplexFuncFromFuncWithSquareBrackets called incorrectly. This should not have been possible!"}(o.text,e.slice(2,s));if(0===(e=e.slice(s+1)).length||"("!==e[0].text)throw"No parameters passed to "+o.text;const g=f(e,0,r.TokenType.Parenthesis),w=m(e.slice(1,g));if(w.length<d)throw"Not enough parameters passed to "+o.text;return g===e.length-1?new c(h,w.map((e=>u(e,t)))):(n.push(new c(h,w.map((e=>u(e,t))))),n.push(u(e.slice(g+1),t)),new c(i.mult,n))}if(s.length>1)throw"Missing parentheses for "+o.text;return new c(s,[u(e.slice(1),t)])}const v=g(o,t);if("function"==typeof v)throw o.text+" called without arguments";return n.push(v),n.push(u(e.slice(1),t)),new c(i.mult,n)}function h(e){return void 0!==s[e]}function d(e){return s[e]}function p(e){return"iterate"===e}function f(e,t,n){let i,a,o,s=1;if(n===r.TokenType.Parenthesis)i="(",a=")";else{if(n!==r.TokenType.SquareBracket)throw"getNextCloseParen called incorrectly. This should not have been possible!";i="[",a="]"}for(o=t+1;o<e.length;o++){switch(e[o].text){case i:s++;break;case a:s--}if(0===s)break}if(o>e.length-1)throw"Error: unbalanced parentheses";return o}function m(e){let t=[],n=[],i=0;for(var a=0;a<e.length;a++){let o=e[a];switch(o.type){case r.TokenType.Comma:0===i?(t.push(n),n=[]):n.push(o);break;case r.TokenType.Parenthesis:case r.TokenType.SquareBracket:"("===o.text||"["===o.text?i++:i--;default:n.push(o)}}return t.push(n),t}function g(e,t){switch(e.type){case r.TokenType.String:if("i"===e.text)return(0,i.imag)(1);if("e"===e.text)return(0,i.real)(Math.E);if("pi"===e.text)return(0,i.real)(Math.PI);if(h(e.text)){const t=d(e.text);if("iterate"===e.text)throw"iterate cannot be used like this (I'm not sure what you entered, but it's wrong)";return t}{if(!function(e,t){if(t.indexOf(e)>=0)return!0;let n=t.indexOf(null);return!(n<0||(t[n]=e,0))}(e.text,t))throw function(e,t){let n="Too many variables: ";if(0===t.length)return n+e;if(1===t.length)n+=t[0]+" ";else for(let e of t)null!==e&&(n+=e+", ");return n+="and "+e,n}(e.text,t);const n=t.indexOf(e.text);return{name:e.text,position:n+1}}case r.TokenType.Number:return(0,i.real)(parseFloat(e.text));case r.TokenType.Comma:throw"Rogue comma detected";default:throw'Something went wrong; encountered "'+e.text+'" where I did not expect it. This should not have been possible!'}}t.Node=c,t.parse=l,t.getNextCloseParen=f,t.splitArguments=m},"./src/scripts/complex/tokenize.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=t.TokenType=t.Token=void 0;const n=(()=>{const e=[];for(var t=65;t<=90;t++)e.push(String.fromCharCode(t));for(t=97;t<=122;t++)e.push(String.fromCharCode(t));return e})(),i="0123456789".split(""),r=n.concat(i),a="+-*/^".split("");var o;!function(e){e[e.Function=0]="Function",e[e.Parenthesis=1]="Parenthesis",e[e.String=2]="String",e[e.Number=3]="Number",e[e.Comma=4]="Comma",e[e.SquareBracket=5]="SquareBracket"}(o||(o={})),t.TokenType=o;class s{constructor(e){this.ind=0,this.ary=e.split("")}nextChar(){return this.ary[this.ind++]}backup(){this.ind-=1}}class c{constructor(e,t){this.text=e,this.type=t}}t.Token=c,t.tokenize=function(e){const t=new s(e),l=[];for(let e=t.nextChar();void 0!==e;e=t.nextChar()){let s,u=e;if(a.indexOf(e)>=0)s=o.Function;else if("("===e||")"===e)s=o.Parenthesis;else if("["===e||"]"===e)s=o.SquareBracket;else if(","===e)s=o.Comma;else if(n.indexOf(e)>=0){for(;r.indexOf(e=t.nextChar())>=0;)u+=e;t.backup(),s=o.String}else{if(!(i.indexOf(e)>=0||"."===e)){if(" "===e)continue;throw"Unrecognized character: "+e}{let n="."===e;for(;i.indexOf(e=t.nextChar())>=0||"."===e;){if("."===e){if(n)throw"Too many dots in a number: "+u+".";n=!0}u+=e}t.backup(),s=o.Number}}l.push(new c(u,s))}return l}}},e=>{e(e.s="./src/complex.tsx")}]);